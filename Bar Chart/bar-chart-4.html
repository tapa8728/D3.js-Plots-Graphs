<!DOCTYPE html>
<meta charset="utf-8">
<style>

.chart rect {
  fill: steelblue;
}

.chart text {
  fill: white;
  font: 10px sans-serif;
  text-anchor: middle;
}

</style>
<svg class="chart"></svg>
<script src="//d3js.org/d3.v3.min.js" charset="utf-8"></script>
<script>
var width = 960;
var height = 500;

//we need to define the y scale because we want a vertical chart
/*
	(0)			  (width)
	-------------> X
	|(height)
	|
	|
	|
	Y (0)

Hence y axis will need to have a lipped domain-range pair as compared to x-axis
*/

var y = d3.scale.linear()
		.range([height, 0]);	//pixel mapping: 500,0: because we want 0 to be positioned at the bottom of the page
		//.domain([0, 360])

var chart = d3.select(".chart")
			.attr("width", width)
			.attr("height", height);

//process the rest of child elements afterr we load the data
d3.tsv("bar-data.txt", type, function(error, data){

	//1. Set the domain for y
	y.domain([0, d3.max(data, function(d){ return d.value; })]);

	//2. Barwidth will vary depending on the numbe rof data points
	var barWidth = width / data.length;

	//3. Make bar as the child element
	var bar = chart.selectAll("g")
		.data(data)
		.enter().append("g")
		.attr("transform", function(d, i){ return "translate(" + i*barWidth+",0)"; });

	bar.append("rect")
		.attr("width", barWidth-1)
		.attr("height", function(d){ return height-y(d.value)})
		.attr("y", function(d) { return y(d.value); });

	bar.append("text")
      .attr("x", barWidth / 2)
      .attr("y", function(d) { return y(d.value) + 3; })
      .attr("dy", ".75em")
      .text(function(d) { return d.value; });
});

function type(d) {
  d.value = +d.value; // coerce to number
  return d;
}

</script>